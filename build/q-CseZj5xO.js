import{_ as o}from"./q-D-pp8oIu.js";import{u as E,q as r,r as x,G as y,o as P,x as L,h as D,i as p,j as v,l as c,_hW as _}from"./q-BBXjioMF.js";import{c as O,u as M}from"./q-CIV1tlZq.js";class Y{constructor(t,e){this.isMultiple=t,this.initialValue=e}add(t){return this.isMultiple?[...Array.isArray(this.initialValue)?[...this.initialValue]:[],t]:t}remove(t){return this.isMultiple&&Array.isArray(this.initialValue)?this.initialValue.filter(e=>e!==t):""}toggle(t){if(this.isMultiple){const e=Array.isArray(this.initialValue)?[...this.initialValue]:[];return e.includes(t)?e.filter(a=>a!==t):[...e,t]}return this.initialValue===t?"":t}}function R(){const i=E(O);return{getNextEnabledItemIndex$:r(()=>o(()=>import("./q-CwWiSd21.js"),[]),"s_ZCgyLW9kUeU",[i]),getPrevEnabledItemIndex$:r(()=>o(()=>import("./q-BsEXQW9K.js").then(n=>n.c),[]),"s_DE0mFAGdnSE",[i]),selectionManager$:r(()=>o(()=>import("./q-v5wJsgst.js"),[]),"s_vmZue04YWbs",[i]),filterManager$:r(()=>o(()=>import("./q-YigOBXQP.js"),[]),"s_9rhFMVe0hs8",[i])}}const X=({"bind:value":i,...t})=>{const e=E(O),a={context:e,givenContextRef:e.inputRef},l=M(t.ref,a),n=`${e.localId}-panel`,h=`${e.localId}-input`,d=`${e.localId}-label`,g=`${e.localId}-description`,f=`${e.localId}-error-message`,u=x(),b=x(!1),S=x(!1),V=R(),I=y(r(()=>o(()=>Promise.resolve().then(()=>H),void 0),"s_xQ00ZzH10sU",[e])),w=P(s=>{["ArrowUp","ArrowDown","Home","End","PageDown","PageUp","Enter"].includes(s.key)&&s.preventDefault()},'e=>{const keys=["ArrowUp","ArrowDown","Home","End","PageDown","PageUp","Enter"];if(keys.includes(e.key)){e.preventDefault();}}'),k=r(()=>o(()=>Promise.resolve().then(()=>W),void 0),"s_ydqlLmhvprI",[V,e,S,b]),$=r(()=>o(()=>Promise.resolve().then(()=>Q),void 0),"s_ODuHyGxW2cg",[e,i,S]),A=r(()=>o(()=>Promise.resolve().then(()=>j),void 0),"s_1upj0tGQ9kI",[e,S,b]);L(r(()=>o(()=>Promise.resolve().then(()=>C),void 0),"s_fpiW9o8afLo",[e,u]));const m=y(r(()=>o(()=>Promise.resolve().then(()=>z),void 0),"s_WuNVtgJ48pw",[i,u]));return D("input",{role:"combobox",get value(){return m.value},id:h,get"aria-activedescendant"(){return I.value},get"aria-expanded"(){return e.isListboxOpenSig.value?"true":"false"},"aria-controls":n,"aria-labelledby":d,"aria-describedby":`${g} 
        ${f}`,"aria-autocomplete":"list","aria-haspopup":"listbox",ref:l,autocomplete:"off",placeholder:e.placeholder??t.placeholder??void 0,"data-combobox-input":!0,get"data-invalid"(){return e.isInvalidSig.value?"":void 0},...t,onKeyDown$:[w,k,t.onKeyDown$],onKeyUp$:[e.removeOnBackspace?A:void 0,t.onKeyUp$],onInput$:[$,t.onInput$]},{role:p,value:v(s=>s.value,[m]),"aria-activedescendant":v(s=>s.value,[I]),"aria-expanded":v(s=>s.isListboxOpenSig.value?"true":"false",[e]),"aria-autocomplete":p,"aria-haspopup":p,autocomplete:p,"data-combobox-input":p,"data-invalid":v(s=>s.isInvalidSig.value?"":void 0,[e])},0,"C0_0")},T=i=>{const[t,e,a]=c();if(i.key==="Backspace"){if(!t.multiple||t.selectedValuesSig.value.length===0||!t.removeOnBackspace)return;if((a.value||e.value)&&t.inputValueSig.value.length===0){const l=[...t.selectedValuesSig.value];l.pop(),t.selectedValuesSig.value=l}}},j=Object.freeze(Object.defineProperty({__proto__:null,_hW:_,s_1upj0tGQ9kI:T},Symbol.toStringTag,{value:"Module"})),U=()=>{const[i,t]=c();return(i==null?void 0:i.value)??t.value??""},z=Object.freeze(Object.defineProperty({__proto__:null,s_WuNVtgJ48pw:U},Symbol.toStringTag,{value:"Module"})),B=async i=>{const[t,e,a,l]=c();if(e.itemsMapSig.value){switch(e.isKeyboardFocusSig.value=!0,i.key==="Backspace"&&(l.value=e.inputValueSig.value.length===0),i.key){case"ArrowDown":e.isListboxOpenSig.value&&e.highlightedIndexSig.value!==null?e.highlightedIndexSig.value=await t.getNextEnabledItemIndex$(e.highlightedIndexSig.value):e.isListboxOpenSig.value=!0;break;case"ArrowUp":e.isListboxOpenSig.value?e.highlightedIndexSig.value=await t.getPrevEnabledItemIndex$(e.highlightedIndexSig.value):e.isListboxOpenSig.value=!0;break;case"Home":e.isListboxOpenSig.value&&(e.highlightedIndexSig.value=await t.getNextEnabledItemIndex$(-1));break;case"End":if(e.isListboxOpenSig.value){const n=await t.getPrevEnabledItemIndex$(e.itemsMapSig.value.size);e.highlightedIndexSig.value=n}break;case"Tab":case"Escape":e.isListboxOpenSig.value=!1;break;case"Enter":if(!e.isListboxOpenSig.value||(await t.selectionManager$(e.highlightedIndexSig.value,"toggle"),e.selectedValuesSig.value.length<=0))break;if(!e.multiple){e.isListboxOpenSig.value=!1;break}e.inputRef.value&&(e.inputRef.value.value="",e.inputValueSig.value="",a.value=!0);break}if(e.highlightedIndexSig.value===null){i.key==="ArrowDown"?e.highlightedIndexSig.value=await t.getNextEnabledItemIndex$(-1):i.key==="ArrowUp"&&(e.highlightedIndexSig.value=await t.getPrevEnabledItemIndex$(e.itemsMapSig.value.size));return}}},W=Object.freeze(Object.defineProperty({__proto__:null,_hW:_,s_ydqlLmhvprI:B},Symbol.toStringTag,{value:"Module"})),q=function(){const[t,e]=c(),{selectedValuesSig:a,multiple:l,itemsMapSig:n,highlightedIndexSig:h}=t,d=a.value,g=[];for(const[f,u]of n.value.entries())if((l?Array.isArray(d)&&d.includes(u.value):u.value===d)&&(g.push(u.displayValue),h.value=f,!l))break;e.value=l?g:g[0]||""},C=Object.freeze(Object.defineProperty({__proto__:null,_hW:_,s_fpiW9o8afLo:q},Symbol.toStringTag,{value:"Module"})),K=()=>{const[i]=c();if(!i.isListboxOpenSig.value)return"";const t=i.highlightedIndexSig.value??-1,e=i.itemsMapSig.value.get(t);return t===null||t===-1||e!=null&&e.disabled?"":`${i.localId}-${t}`},H=Object.freeze(Object.defineProperty({__proto__:null,s_xQ00ZzH10sU:K},Symbol.toStringTag,{value:"Module"})),N=async(i,t)=>{const[e,a,l]=c(),n=i.target;e.inputValueSig.value=n.value,e.highlightedIndexSig.value=null,l.value=!1,n.value===""&&!e.multiple?e.selectedValuesSig.value="":e.isListboxOpenSig.value=!0,a&&(a.value=t.value,e.inputValueSig.value=t.value)},Q=Object.freeze(Object.defineProperty({__proto__:null,_hW:_,s_ODuHyGxW2cg:N},Symbol.toStringTag,{value:"Module"}));export{Y as V,U as a,B as b,q as c,K as d,N as e,T as s,X as s_OQkalMaLah8,R as u};
