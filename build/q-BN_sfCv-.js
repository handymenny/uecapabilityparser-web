import{a as V,E as T}from"./q-DgEbwr_b.js";var F=Symbol("cache-parser");function k(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function b(e){return(typeof e=="string"||typeof e=="number")&&(e=Number(e))>=0&&e<1/0}function w(e){return e===!0||typeof e=="number"||typeof e=="string"&&e!=="false"}var C=Number;function X(e){var t=Object.defineProperty({},F,{enumerable:!1,value:1});if(!e||typeof e!="string")return t;var a=function(d){for(var l,g={},u=function(y,q){var v=typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(v)return(v=v.call(y)).next.bind(v);if(Array.isArray(y)||(v=function(p,R){if(p){if(typeof p=="string")return k(p,R);var S=Object.prototype.toString.call(p).slice(8,-1);return S==="Object"&&p.constructor&&(S=p.constructor.name),S==="Map"||S==="Set"?Array.from(p):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?k(p,R):void 0}}(y))){v&&(y=v);var P=0;return function(){return P>=y.length?{done:!0}:{done:!1,value:y[P++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}(d.toLowerCase().replace(/\s+/g,"").split(","));!(l=u()).done;){var m,f=l.value.split("=",2);g[f[0]]=(m=f[1])==null||m}return g}(e),i=a["max-age"],r=a["max-stale"],c=a["min-fresh"],n=a["s-maxage"],s=a["stale-if-error"],o=a["stale-while-revalidate"];return w(a.immutable)&&(t.immutable=!0),b(i)&&(t.maxAge=C(i)),b(r)&&(t.maxStale=C(r)),b(c)&&(t.minFresh=C(c)),w(a["must-revalidate"])&&(t.mustRevalidate=!0),w(a["must-understand"])&&(t.mustUnderstand=!0),w(a["no-cache"])&&(t.noCache=!0),w(a["no-store"])&&(t.noStore=!0),w(a["no-transform"])&&(t.noTransform=!0),w(a["only-if-cached"])&&(t.onlyIfCached=!0),w(a.private)&&(t.private=!0),w(a["proxy-revalidate"])&&(t.proxyRevalidate=!0),w(a.public)&&(t.public=!0),b(n)&&(t.sMaxAge=C(n)),b(s)&&(t.staleIfError=C(s)),b(o)&&(t.staleWhileRevalidate=C(o)),t}var G=Symbol();function J(){var e,t,a=new Promise(function(i,r){e=i,t=r});return a.resolve=e,a.reject=t,a[G]=1,a}function U(e,t){return e>t?1:-1}function E(e,t){var a=5381;if(typeof e=="object"&&e!==null&&(e.toString===Object.prototype.toString||e.toString===Array.prototype.toString)){t||(t=new WeakSet);for(var i=Object.keys(e).sort(U),r=0;r<i.length;r++){var c=i[r],n=e[c];if(a=33*a^E(c,t),typeof n=="object"&&n!==null&&(e.toString===Object.prototype.toString||e.toString===Array.prototype.toString)){if(t.has(n))continue;t.add(n)}a=33*a^E(n,t)}return 33*a^E(e.constructor,t)}var s=typeof e;try{e instanceof Date?s+=e.getTime():s+=String(e)}catch{s+=String(Object.assign({},e))}for(var o=0;o<s.length;o++)a=33*a^s.charCodeAt(o);return a}/*!
 * Axios Cache Interceptor 1.6.0
 * (c) 2021-present Arthur Fiorette & Contributors
 * Released under the MIT License.
 */const h=Object.freeze({IfModifiedSince:"if-modified-since",LastModified:"last-modified",IfNoneMatch:"if-none-match",CacheControl:"cache-control",Pragma:"pragma",ETag:"etag",Expires:"expires",Age:"age",XAxiosCacheEtag:"x-axios-cache-etag",XAxiosCacheLastModified:"x-axios-cache-last-modified",XAxiosCacheStaleIfError:"x-axios-cache-stale-if-error"}),W=e=>{if(!e)return"not enough headers";const t=e[h.CacheControl];if(t){const{noCache:i,noStore:r,maxAge:c,maxStale:n,immutable:s,staleWhileRevalidate:o}=X(String(t));if(i||r)return"dont cache";if(s)return{cache:1e3*60*60*24*365};if(c!==void 0){const d=e[h.Age];return{cache:d?(c-Number(d))*1e3:c*1e3,stale:n!==void 0?n*1e3:o!==void 0?o*1e3:void 0}}}const a=e[h.Expires];if(a){const i=Date.parse(String(a))-Date.now();return i>=0?{cache:i}:"dont cache"}return"not enough headers"};function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},I.apply(this,arguments)}function z(e){return e?t=>e(t)||t===304:t=>t>=200&&t<300||t===304}function j(e="get",t=[]){return e=e.toLowerCase(),t.some(a=>a===e)}function $(e,t){t.headers||(t.headers={});const{etag:a,modifiedSince:i}=t.cache;if(a){var r;const c=a===!0?(r=e.data)==null?void 0:r.headers[h.ETag]:a;c&&(t.headers[h.IfNoneMatch]=c)}i&&(t.headers[h.IfModifiedSince]=i===!0?e.data.headers[h.LastModified]||new Date(e.createdAt).toUTCString():i.toUTCString())}function H(e,t){return e.status===304&&t?(e.cached=!0,e.data=t.data,e.status=t.status,e.statusText=t.statusText,e.headers=I({},t.headers,e.headers),t):{data:e.data,status:e.status,statusText:e.statusText,headers:e.headers}}function _(e){const t=async a=>{if(a.id=e.generateKey(a),a.cache===!1)return a;if(a.cache=I({},e.defaults.cache,a.cache),typeof a.cache.cachePredicate=="object"&&a.cache.cachePredicate.ignoreUrls&&a.url){for(const y of a.cache.cachePredicate.ignoreUrls)if(y instanceof RegExp?(y.lastIndex=0,y.test(a.url)):a.url.includes(y))return a}if(a.cache.cacheTakeover){var i,r,c,n,s,o,d,l,g;(c=(i=a.headers)[r=h.CacheControl])!=null||(i[r]="no-cache"),(o=(n=a.headers)[s=h.Pragma])!=null||(n[s]="no-cache"),(g=(d=a.headers)[l=h.Expires])!=null||(d[l]="0")}if(!j(a.method,a.cache.methods))return a;let u=await e.storage.get(a.id,a);const m=a.cache.override;t:if(u.state==="empty"||u.state==="stale"||u.state==="must-revalidate"||m){if(e.waiting[a.id]&&!m&&(u=await e.storage.get(a.id,a),u.state!=="empty"&&u.state!=="must-revalidate"))break t;return e.waiting[a.id]=J(),e.waiting[a.id].catch(()=>{}),await e.storage.set(a.id,{state:"loading",previous:m?u.data?"stale":"empty":u.state,data:u.data,createdAt:m&&!u.createdAt?Date.now():u.createdAt},a),(u.state==="stale"||u.state==="must-revalidate")&&$(u,a),a.validateStatus=z(a.validateStatus),(u.state==="stale"||u.data&&u.state!=="must-revalidate")&&await(a.cache.hydrate==null?void 0:a.cache.hydrate(u)),a}let f;if(u.state==="loading"){const y=e.waiting[a.id];if(!y)return u.data&&await(a.cache.hydrate==null?void 0:a.cache.hydrate(u)),a;try{f=await y}catch{return u.data&&await(a.cache.hydrate==null?void 0:a.cache.hydrate(u)),t(a)}}else f=u.data;return a.transformResponse=void 0,a.adapter=function(){return Promise.resolve({config:a,data:f.data,headers:f.headers,status:f.status,statusText:f.statusText,cached:!0,stale:u.previous==="stale",id:a.id})},a};return{onFulfilled:t,apply:()=>e.interceptors.request.use(t)}}async function B(e,t){if(typeof t=="function")return t(e);const{statusCheck:a,responseMatch:i,containsHeaders:r}=t;if(a&&!await a(e.status)||i&&!await i(e))return!1;if(r)for(const[n,s]of Object.entries(r)){var c;if(!await s((c=e.headers[n.toLowerCase()])!=null?c:e.headers[n]))return!1}return!0}async function Q(e,t,a){if(typeof a=="function")return a(t);for(const[i,r]of Object.entries(a)){if(r==="delete"){await e.remove(i,t.config);continue}const c=await e.get(i,t.config);if(c.state==="loading")continue;const n=await r(c,t);if(n==="delete"){await e.remove(i,t.config);continue}n!=="ignore"&&await e.set(i,n,t.config)}}function Y(e){const t=async(r,c)=>{var n;await e.storage.remove(r,c),(n=e.waiting[r])==null||n.reject(),delete e.waiting[r]},a=async r=>{var c;if(!(r!=null&&r.config))throw r;r.id=r.config.id,(c=r.cached)!=null||(r.cached=!1);const n=r.config,s=n.cache;if(r.cached)return r;if(!s)return r.cached=!1,r;if(s.update&&await Q(e.storage,r,s.update),!j(n.method,s.methods))return r;const o=await e.storage.get(r.id,n);if(o.state!=="loading")return r;if(!o.data&&!await B(r,s.cachePredicate))return await t(r.id,n),r;for(const f of Object.keys(r.headers))f.startsWith("x-axios-cache")&&delete r.headers[f];s.etag&&s.etag!==!0&&(r.headers[h.XAxiosCacheEtag]=s.etag),s.modifiedSince&&(r.headers[h.XAxiosCacheLastModified]=s.modifiedSince===!0?"use-cache-timestamp":s.modifiedSince.toUTCString());let d=s.ttl||-1,l;if(s.interpretHeader){const f=e.headerInterpreter(r.headers);if(f==="dont cache")return await t(r.id,n),r;f!=="not enough headers"&&(typeof f=="number"?d=f:(d=f.cache,l=f.stale))}const g=H(r,o.data);typeof d=="function"&&(d=await d(r)),s.staleIfError&&(r.headers[h.XAxiosCacheStaleIfError]=String(d));const u={state:"cached",ttl:d,staleTtl:l,createdAt:Date.now(),data:g},m=e.waiting[r.id];return m&&(m.resolve(u.data),delete e.waiting[r.id]),await e.storage.set(r.id,u,n),r},i=async r=>{if(!r.isAxiosError||!r.config)throw r;const c=r.config,n=c.id,s=c.cache,o=r.response;if(!s||!n)throw r;if(!j(c.method,s.methods))throw await t(n,c),r;const d=await e.storage.get(n,c);if(d.state!=="loading"||d.previous!=="stale")throw await t(n,c),r;if(s.staleIfError){const g=String(o==null?void 0:o.headers[h.CacheControl]),u=g&&X(g).staleIfError,m=typeof s.staleIfError=="function"?await s.staleIfError(o,d,r):s.staleIfError===!0&&u?u*1e3:s.staleIfError;if(m===!0||typeof m=="number"&&d.createdAt+m>Date.now()){var l;return(l=e.waiting[n])==null||l.resolve(d.data),delete e.waiting[n],await e.storage.set(n,{state:"stale",createdAt:Date.now(),data:d.data},c),{cached:!0,stale:!0,config:c,id:n,data:d.data.data,headers:d.data.headers,status:d.data.status,statusText:d.data.statusText}}}throw await t(n,c),r};return{onFulfilled:a,onRejected:i,apply:()=>e.interceptors.response.use(a,i)}}const Z=e=>!!e&&!!e["is-storage"];function D(e){const t=e.data.headers;return h.ETag in t||h.LastModified in t||h.XAxiosCacheEtag in t||h.XAxiosCacheLastModified in t}function tt(e){return String(e.data.headers[h.CacheControl]).includes("must-revalidate")}function K(e){return D(e)?!0:e.state==="cached"&&e.staleTtl!==void 0&&Math.abs(Date.now()-(e.createdAt+e.ttl))<=e.staleTtl}function M(e){return e.ttl!==void 0&&e.createdAt+e.ttl<=Date.now()}function et({set:e,find:t,remove:a,clear:i}){return{"is-storage":1,set:e,remove:a,clear:i,get:async(r,c)=>{let n=await t(r,c);if(!n)return{state:"empty"};if(n.state==="empty"||n.state==="loading"||n.state==="must-revalidate")return n;if(n.state==="cached"){if(!M(n))return n;if(!K(n))return await a(r,c),{state:"empty"};if(n={state:"stale",createdAt:n.createdAt,data:n.data,ttl:n.staleTtl!==void 0?n.staleTtl+n.ttl:void 0},await e(r,n,c),tt(n))return I({},n,{state:"must-revalidate"})}return!M(n)||D(n)?n:(await a(r,c),{state:"empty"})}}}function at(e=!1,t=!1,a=!1){const i=et({set:(r,c)=>{if(a){let n=Object.keys(i.data);if(n.length>=a)for(i.cleanup(),n=Object.keys(i.data);n.length>=a;)delete i.data[n.shift()]}i.data[r]=e==="double"?typeof structuredClone=="function"?structuredClone(c):JSON.parse(JSON.stringify(c)):c},remove:r=>{delete i.data[r]},find:r=>{const c=i.data[r];return e&&c!==void 0?typeof structuredClone=="function"?structuredClone(c):JSON.parse(JSON.stringify(c)):c},clear:()=>{i.data=Object.create(null)}});return i.data=Object.create(null),i.cleanup=()=>{const r=Object.keys(i.data);let c=-1,n,s;for(;++c<r.length;){if(s=r[c],n=i.data[s],n.state==="empty"){i.remove(s);continue}n.state==="cached"&&M(n)&&!K(n)&&i.remove(s)}},t&&(i.cleaner=setInterval(i.cleanup,t)),i}const N=/^\/|\/$/g;function rt(e){return t=>{if(t.id)return t.id;const a=e(t);return typeof a=="string"||typeof a=="number"?`${a}`:`${E(a)}`}}const nt=rt(({baseURL:e,url:t,method:a,params:i,data:r})=>(e!==void 0?e=e.replace(N,""):e="",t!==void 0?t=t.replace(N,""):t="",a!==void 0?a=a.toLowerCase():a="get",{url:e+(e&&t?"/":"")+t,params:i,method:a,data:r}));function it(e,t={}){var a,i,r,c,n,s,o,d;const l=e;if(l.defaults.cache)throw new Error("setupCache() should be called only once");if(l.storage=t.storage||at(),!Z(l.storage))throw new Error("Use buildStorage() function");return l.waiting=t.waiting||{},l.generateKey=t.generateKey||nt,l.headerInterpreter=t.headerInterpreter||W,l.requestInterceptor=t.requestInterceptor||_(l),l.responseInterceptor=t.responseInterceptor||Y(l),l.debug=t.debug||function(){},l.defaults.cache={update:t.update||{},ttl:(a=t.ttl)!=null?a:1e3*60*5,methods:t.methods||["get","head"],cachePredicate:t.cachePredicate||{statusCheck:g=>[200,203,300,301,302,404,405,410,414,501].includes(g)},etag:(i=t.etag)!=null?i:!0,modifiedSince:(r=t.modifiedSince)!=null?r:t.etag===!1,interpretHeader:(c=t.interpretHeader)!=null?c:!0,cacheTakeover:(n=t.cacheTakeover)!=null?n:!0,staleIfError:(s=t.staleIfError)!=null?s:!0,override:(o=t.override)!=null?o:!1,hydrate:(d=t.hydrate)!=null?d:void 0},l.requestInterceptor.apply(),l.responseInterceptor.apply(),l}const ct=V.create(),x=it(ct),O={cache:{ttl:"1000 * 60",interpretHeader:!1,staleIfError:!1}},A=async()=>{const e=T.STATUS;try{const t=await x.get(e,{...O,validateStatus:()=>!0});if(t.status==200)return t.data}catch(t){console.error(t)}},st=async()=>{const e=T.VERSION;try{return(await x.get(e,O)).data.version}catch(t){console.error(t)}},ut=async()=>{const e=T.STORE+"status";try{return(await x.get(e,O)).data.enabled==!0}catch(t){console.error(t)}return!1},dt=async()=>{const e=T.PARSEMULTI;try{const t=await x.get(e,{...O,validateStatus:()=>!0});return t.status!==404&&t.status<500}catch{return!1}};let L;(function(e){e.getVersion=async()=>{const t=await A();return t!=null?t.version:await st()},e.isStoreSuported=async()=>{const t=await A();return t!=null?t.endpoints.includes("/store/list"):await ut()},e.isMultiSupported=async()=>{const t=await A();return t!=null?t.endpoints.includes("/parse/multi")||t.endpoints.includes("/parse/multiPart"):await dt()},e.isMultiPartSupported=async()=>{const t=await A();return t!=null?t.endpoints.includes("/parse/multiPart"):!1},e.getMaxRequestSize=async()=>{const t=await A();return t!=null?t.maxRequestSize:Number.MAX_SAFE_INTEGER},e.getSupportedLogs=async()=>{const t=await A();return t!=null?t.logTypes:[]}})(L||(L={}));export{L as S};
