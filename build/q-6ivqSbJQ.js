import{_ as s}from"./q-N76fqm0C.js";import{u as E,q as u,r as f,G as y,o as P,x as L,h as D,i as p,j as _,l as c,_hW as v}from"./q-BmWDAmC3.js";import{c as k,u as M}from"./q-Dtq2tCwb.js";class Y{constructor(t,e){this.isMultiple=t,this.initialValue=e}add(t){return this.isMultiple?[...Array.isArray(this.initialValue)?[...this.initialValue]:[],t]:t}remove(t){return this.isMultiple&&Array.isArray(this.initialValue)?this.initialValue.filter(e=>e!==t):""}toggle(t){if(this.isMultiple){const e=Array.isArray(this.initialValue)?[...this.initialValue]:[];return e.includes(t)?e.filter(a=>a!==t):[...e,t]}return this.initialValue===t?"":t}}function j(){const i=E(k);return{getNextEnabledItemIndex$:u(()=>s(()=>import("./q-CTn3NT7F.js"),[]),"s_ZCgyLW9kUeU",[i]),getPrevEnabledItemIndex$:u(()=>s(()=>import("./q-D6Ai9M3_.js").then(o=>o.u),[]),"s_DE0mFAGdnSE",[i]),selectionManager$:u(()=>s(()=>import("./q-BcanFoxR.js"),[]),"s_vmZue04YWbs",[i]),filterManager$:u(()=>s(()=>import("./q-CbDYqS68.js"),[]),"s_9rhFMVe0hs8",[i])}}const X=({"bind:value":i,...t})=>{const e=E(k),a={context:e,givenContextRef:e.inputRef},n=M(t.ref,a),o=`${e.localId}-panel`,b=`${e.localId}-input`,d=`${e.localId}-label`,g=`${e.localId}-description`,h=`${e.localId}-error-message`,r=f(),m=f(!1),x=f(!1),w=j(),S=y(u(()=>s(()=>Promise.resolve().then(()=>H),void 0),"s_xQ00ZzH10sU",[e])),O=P(l=>{["ArrowUp","ArrowDown","Home","End","PageDown","PageUp","Enter"].includes(l.key)&&l.preventDefault()},'e=>{const keys=["ArrowUp","ArrowDown","Home","End","PageDown","PageUp","Enter"];if(keys.includes(e.key)){e.preventDefault();}}'),V=u(()=>s(()=>Promise.resolve().then(()=>B),void 0),"s_ydqlLmhvprI",[w,e,x,m]),$=u(()=>s(()=>Promise.resolve().then(()=>Q),void 0),"s_ODuHyGxW2cg",[e,i,x]),A=u(()=>s(()=>Promise.resolve().then(()=>T),void 0),"s_1upj0tGQ9kI",[e,x,m]);L(u(()=>s(()=>Promise.resolve().then(()=>C),void 0),"s_fpiW9o8afLo",[e,r]));const I=y(u(()=>s(()=>Promise.resolve().then(()=>U),void 0),"s_WuNVtgJ48pw",[i,r]));return D("input",{role:"combobox",get value(){return I.value},id:b,get"aria-activedescendant"(){return S.value},get"aria-expanded"(){return e.isListboxOpenSig.value?"true":"false"},"aria-controls":o,"aria-labelledby":d,"aria-describedby":`${g} 
        ${h}`,"aria-autocomplete":"list","aria-haspopup":"listbox",ref:n,autocomplete:"off",placeholder:e.placeholder??t.placeholder??void 0,"data-combobox-input":!0,get"data-invalid"(){return e.isInvalidSig.value?"":void 0},...t,onKeyDown$:[O,V,t.onKeyDown$],onKeyUp$:[e.removeOnBackspace?A:void 0,t.onKeyUp$],onInput$:[$,t.onInput$]},{role:p,value:_(l=>l.value,[I]),"aria-activedescendant":_(l=>l.value,[S]),"aria-expanded":_(l=>l.isListboxOpenSig.value?"true":"false",[e]),"aria-autocomplete":p,"aria-haspopup":p,autocomplete:p,"data-combobox-input":p,"data-invalid":_(l=>l.isInvalidSig.value?"":void 0,[e])},0,"C0_0")},R=i=>{const[t,e,a]=c();if(i.key==="Backspace"){if(!t.multiple||t.selectedValuesSig.value.length===0||!t.removeOnBackspace)return;if((a.value||e.value)&&t.inputValueSig.value.length===0){const n=[...t.selectedValuesSig.value];n.pop(),t.selectedValuesSig.value=n}}},T=Object.freeze(Object.defineProperty({__proto__:null,_hW:v,s_1upj0tGQ9kI:R},Symbol.toStringTag,{value:"Module"})),q=()=>{const[i,t]=c();return(i==null?void 0:i.value)??t.value??""},U=Object.freeze(Object.defineProperty({__proto__:null,s_WuNVtgJ48pw:q},Symbol.toStringTag,{value:"Module"})),z=async i=>{const[t,e,a,n]=c();if(e.itemsMapSig.value){switch(e.isKeyboardFocusSig.value=!0,i.key==="Backspace"&&(n.value=e.inputValueSig.value.length===0),i.key){case"ArrowDown":e.isListboxOpenSig.value&&e.highlightedIndexSig.value!==null?e.highlightedIndexSig.value=await t.getNextEnabledItemIndex$(e.highlightedIndexSig.value):e.isListboxOpenSig.value=!0;break;case"ArrowUp":e.isListboxOpenSig.value?e.highlightedIndexSig.value=await t.getPrevEnabledItemIndex$(e.highlightedIndexSig.value):e.isListboxOpenSig.value=!0;break;case"Home":e.isListboxOpenSig.value&&(e.highlightedIndexSig.value=await t.getNextEnabledItemIndex$(-1));break;case"End":if(e.isListboxOpenSig.value){const o=await t.getPrevEnabledItemIndex$(e.itemsMapSig.value.size);e.highlightedIndexSig.value=o}break;case"Tab":case"Escape":e.isListboxOpenSig.value=!1;break;case"Enter":if(!e.isListboxOpenSig.value||(await t.selectionManager$(e.highlightedIndexSig.value,"toggle"),e.selectedValuesSig.value.length<=0))break;if(!e.multiple){e.isListboxOpenSig.value=!1;break}e.inputRef.value&&(e.inputRef.value.value="",e.inputValueSig.value="",a.value=!0);break}if(e.highlightedIndexSig.value===null){i.key==="ArrowDown"?e.highlightedIndexSig.value=await t.getNextEnabledItemIndex$(-1):i.key==="ArrowUp"&&(e.highlightedIndexSig.value=await t.getPrevEnabledItemIndex$(e.itemsMapSig.value.size));return}}},B=Object.freeze(Object.defineProperty({__proto__:null,_hW:v,s_ydqlLmhvprI:z},Symbol.toStringTag,{value:"Module"})),W=function(){const[t,e]=c(),{selectedValuesSig:a,multiple:n,itemsMapSig:o,highlightedIndexSig:b}=t,d=a.value,g=[];for(const[h,r]of o.value.entries())if((n?Array.isArray(d)&&d.includes(r.value):r.value===d)&&(g.push(r.displayValue),b.value=h,!n))break;e.value=n?g:g[0]||""},C=Object.freeze(Object.defineProperty({__proto__:null,_hW:v,s_fpiW9o8afLo:W},Symbol.toStringTag,{value:"Module"})),K=()=>{const[i]=c();if(!i.isListboxOpenSig.value)return"";const t=i.highlightedIndexSig.value??-1,e=i.itemsMapSig.value.get(t);return t===null||t===-1||e!=null&&e.disabled?"":`${i.localId}-${t}`},H=Object.freeze(Object.defineProperty({__proto__:null,s_xQ00ZzH10sU:K},Symbol.toStringTag,{value:"Module"})),N=async(i,t)=>{const[e,a,n]=c(),o=i.target;e.inputValueSig.value=o.value,e.highlightedIndexSig.value=null,n.value=!1,o.value===""&&!e.multiple?e.selectedValuesSig.value="":e.isListboxOpenSig.value=!0,a&&(a.value=t.value,e.inputValueSig.value=t.value)},Q=Object.freeze(Object.defineProperty({__proto__:null,_hW:v,s_ODuHyGxW2cg:N},Symbol.toStringTag,{value:"Module"}));export{Y as V,q as a,z as b,W as c,K as d,N as e,R as s,X as s_OQkalMaLah8,j as u};
