import{_ as l}from"./q-CP35H2v1.js";import{u as O,q as s,r as x,G as E,o as P,x as L,h as D,i as v,j as _,l as c,_hW as h}from"./q-BBXjioMF.js";import{c as V,u as M}from"./q-DYyTZtij.js";class Y{constructor(t,e){this.isMultiple=t,this.initialValue=e}add(t){return this.isMultiple?[...Array.isArray(this.initialValue)?[...this.initialValue]:[],t]:t}remove(t){return this.isMultiple&&Array.isArray(this.initialValue)?this.initialValue.filter(e=>e!==t):""}toggle(t){if(this.isMultiple){const e=Array.isArray(this.initialValue)?[...this.initialValue]:[];return e.includes(t)?e.filter(a=>a!==t):[...e,t]}return this.initialValue===t?"":t}}function R(){const i=O(V);return{getNextEnabledItemIndex$:s(()=>l(()=>import("./q-Dyp9UrSh.js"),[]),"s_ZCgyLW9kUeU",[i]),getPrevEnabledItemIndex$:s(()=>l(()=>import("./q-BZCZVIGY.js").then(d=>d.d),[]),"s_DE0mFAGdnSE",[i]),getActiveDescendant$:s(()=>l(()=>import("./q-DW_JhB2J.js"),[]),"s_6mrSmO07FIU",[i]),selectionManager$:s(()=>l(()=>import("./q-By68rF1R.js"),[]),"s_vmZue04YWbs",[i]),filterManager$:s(()=>l(()=>import("./q-DFoID_lL.js"),[]),"s_9rhFMVe0hs8",[i])}}const X=({"bind:value":i,...t})=>{const e=O(V),a={context:e,givenContextRef:e.inputRef},n=M(t.ref,a),r=`${e.localId}-panel`,d=`${e.localId}-input`,g=`${e.localId}-label`,p=`${e.localId}-description`,b=`${e.localId}-error-message`,u=x(),f=x(!1),S=x(!1),m=R(),I=E(s(()=>l(()=>Promise.resolve().then(()=>H),void 0),"s_xQ00ZzH10sU",[m,e])),A=P(o=>{["ArrowUp","ArrowDown","Home","End","PageDown","PageUp","Enter"].includes(o.key)&&o.preventDefault()},'e=>{const keys=["ArrowUp","ArrowDown","Home","End","PageDown","PageUp","Enter"];if(keys.includes(e.key)){e.preventDefault();}}'),w=s(()=>l(()=>Promise.resolve().then(()=>W),void 0),"s_ydqlLmhvprI",[m,e,S,f]),$=s(()=>l(()=>Promise.resolve().then(()=>Q),void 0),"s_ODuHyGxW2cg",[e,i,S]),k=s(()=>l(()=>Promise.resolve().then(()=>j),void 0),"s_1upj0tGQ9kI",[e,S,f]);L(s(()=>l(()=>Promise.resolve().then(()=>C),void 0),"s_fpiW9o8afLo",[e,u]));const y=E(s(()=>l(()=>Promise.resolve().then(()=>z),void 0),"s_WuNVtgJ48pw",[i,u]));return D("input",{role:"combobox",get value(){return y.value},id:d,get"aria-activedescendant"(){return I.value},get"aria-expanded"(){return e.isListboxOpenSig.value?"true":"false"},"aria-controls":r,"aria-labelledby":g,"aria-describedby":`${p} 
        ${b}`,"aria-autocomplete":"list","aria-haspopup":"listbox",ref:n,autocomplete:"off",placeholder:e.placeholder??t.placeholder??void 0,"data-combobox-input":!0,get"data-invalid"(){return e.isInvalidSig.value?"":void 0},...t,onKeyDown$:[A,w,t.onKeyDown$],onKeyUp$:[e.removeOnBackspace?k:void 0,t.onKeyUp$],onInput$:[$,t.onInput$]},{role:v,value:_(o=>o.value,[y]),"aria-activedescendant":_(o=>o.value,[I]),"aria-expanded":_(o=>o.isListboxOpenSig.value?"true":"false",[e]),"aria-autocomplete":v,"aria-haspopup":v,autocomplete:v,"data-combobox-input":v,"data-invalid":_(o=>o.isInvalidSig.value?"":void 0,[e])},0,"C0_0")},T=i=>{const[t,e,a]=c();if(i.key==="Backspace"){if(!t.multiple||t.selectedValuesSig.value.length===0||!t.removeOnBackspace)return;if((a.value||e.value)&&t.inputValueSig.value.length===0){const n=[...t.selectedValuesSig.value];n.pop(),t.selectedValuesSig.value=n}}},j=Object.freeze(Object.defineProperty({__proto__:null,_hW:h,s_1upj0tGQ9kI:T},Symbol.toStringTag,{value:"Module"})),U=()=>{const[i,t]=c();return(i==null?void 0:i.value)??t.value??""},z=Object.freeze(Object.defineProperty({__proto__:null,s_WuNVtgJ48pw:U},Symbol.toStringTag,{value:"Module"})),B=async i=>{const[t,e,a,n]=c();if(e.itemsMapSig.value){switch(e.isKeyboardFocusSig.value=!0,i.key==="Backspace"&&(n.value=e.inputValueSig.value.length===0),i.key){case"ArrowDown":e.isListboxOpenSig.value&&e.highlightedIndexSig.value!==null?e.highlightedIndexSig.value=await t.getNextEnabledItemIndex$(e.highlightedIndexSig.value):e.isListboxOpenSig.value=!0;break;case"ArrowUp":e.isListboxOpenSig.value?e.highlightedIndexSig.value=await t.getPrevEnabledItemIndex$(e.highlightedIndexSig.value):e.isListboxOpenSig.value=!0;break;case"Home":e.isListboxOpenSig.value&&(e.highlightedIndexSig.value=await t.getNextEnabledItemIndex$(-1));break;case"End":if(e.isListboxOpenSig.value){const r=await t.getPrevEnabledItemIndex$(e.itemsMapSig.value.size);e.highlightedIndexSig.value=r}break;case"Tab":case"Escape":e.isListboxOpenSig.value=!1;break;case"Enter":if(!e.isListboxOpenSig.value||(await t.selectionManager$(e.highlightedIndexSig.value,"toggle"),e.selectedValuesSig.value.length<=0))break;if(!e.multiple){e.isListboxOpenSig.value=!1;break}e.inputRef.value&&(e.inputRef.value.value="",e.inputValueSig.value="",a.value=!0);break}if(e.highlightedIndexSig.value===null){i.key==="ArrowDown"?e.highlightedIndexSig.value=await t.getNextEnabledItemIndex$(-1):i.key==="ArrowUp"&&(e.highlightedIndexSig.value=await t.getPrevEnabledItemIndex$(e.itemsMapSig.value.size));return}}},W=Object.freeze(Object.defineProperty({__proto__:null,_hW:h,s_ydqlLmhvprI:B},Symbol.toStringTag,{value:"Module"})),q=function(){const[t,e]=c(),{selectedValuesSig:a,multiple:n,itemsMapSig:r,highlightedIndexSig:d}=t,g=a.value,p=[];for(const[b,u]of r.value.entries())if((n?Array.isArray(g)&&g.includes(u.value):u.value===g)&&(p.push(u.displayValue),d.value=b,!n))break;e.value=n?p:p[0]||""},C=Object.freeze(Object.defineProperty({__proto__:null,_hW:h,s_fpiW9o8afLo:q},Symbol.toStringTag,{value:"Module"})),K=async()=>{const[i,t]=c();return t.isListboxOpenSig.value?i.getActiveDescendant$(t.highlightedIndexSig.value??-1):""},H=Object.freeze(Object.defineProperty({__proto__:null,s_xQ00ZzH10sU:K},Symbol.toStringTag,{value:"Module"})),N=async(i,t)=>{const[e,a,n]=c(),r=i.target;e.inputValueSig.value=r.value,e.highlightedIndexSig.value=null,n.value=!1,r.value===""&&!e.multiple?e.selectedValuesSig.value="":e.isListboxOpenSig.value=!0,a&&(a.value=t.value,e.inputValueSig.value=t.value)},Q=Object.freeze(Object.defineProperty({__proto__:null,_hW:h,s_ODuHyGxW2cg:N},Symbol.toStringTag,{value:"Module"}));export{Y as V,U as a,B as b,q as c,K as d,N as e,T as s,X as s_OQkalMaLah8,R as u};
