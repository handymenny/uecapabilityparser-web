let v=!1;if(typeof window<"u"){const o={get passive(){v=!0}};window.addEventListener("testPassive",null,o),window.removeEventListener("testPassive",null,o)}const u=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);let s=[],n=new Map,a=!1,w=-1,r,d,l,c;const p=o=>s.some(e=>!!(e.options.allowTouchMove&&e.options.allowTouchMove(o))),f=o=>{const e=o||window.event;return p(e.target)||e.touches.length>1?!0:(e.preventDefault&&e.preventDefault(),!1)},g=o=>{if(c===void 0){const e=!!o&&o.reserveScrollBarGap===!0,i=window.innerWidth-document.documentElement.getBoundingClientRect().width;if(e&&i>0){const t=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right"),10);c=document.body.style.paddingRight,document.body.style.paddingRight=`${t+i}px`}}r===void 0&&(r=document.body.style.overflow,document.body.style.overflow="hidden")},m=()=>{c!==void 0&&(document.body.style.paddingRight=c,c=void 0),r!==void 0&&(document.body.style.overflow=r,r=void 0)},b=()=>window.requestAnimationFrame(()=>{const o=document.documentElement,e=document.body;if(l===void 0){d={...o.style},l={...e.style};const{scrollY:i,scrollX:t,innerHeight:h}=window;o.style.height="100%",o.style.overflow="hidden",e.style.position="fixed",e.style.top=`${-i}px`,e.style.left=`${-t}px`,e.style.width="100%",e.style.height="auto",e.style.overflow="hidden",setTimeout(()=>window.requestAnimationFrame(()=>{const y=h-window.innerHeight;y&&i>=h&&(e.style.top=-(i+y)+"px")}),300)}}),S=()=>{if(l!==void 0){const o=-parseInt(document.body.style.top,10),e=-parseInt(document.body.style.left,10),i=document.documentElement,t=document.body;i.style.height=(d==null?void 0:d.height)||"",i.style.overflow=(d==null?void 0:d.overflow)||"",t.style.position=l.position||"",t.style.top=l.top||"",t.style.left=l.left||"",t.style.width=l.width||"",t.style.height=l.height||"",t.style.overflow=l.overflow||"",window.scrollTo(e,o),l=void 0}},T=o=>o?o.scrollHeight-o.scrollTop<=o.clientHeight:!1,B=(o,e)=>{const i=o.targetTouches[0].clientY-w;return p(o.target)?!1:e&&e.scrollTop===0&&i>0||T(e)&&i<0?f(o):(o.stopPropagation(),!0)},P=(o,e)=>{if(!o){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(n.set(o,n!=null&&n.get(o)?(n==null?void 0:n.get(o))+1:1),s.some(t=>t.targetElement===o))return;const i={targetElement:o,options:e||{}};s=[...s,i],u?b():g(e),u&&(o.ontouchstart=t=>{t.targetTouches.length===1&&(w=t.targetTouches[0].clientY)},o.ontouchmove=t=>{t.targetTouches.length===1&&B(t,o)},a||(document.addEventListener("touchmove",f,v?{passive:!1}:void 0),a=!0))},x=o=>{if(!o){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}n.set(o,n!=null&&n.get(o)?(n==null?void 0:n.get(o))-1:0),(n==null?void 0:n.get(o))===0&&(s=s.filter(e=>e.targetElement!==o),n==null||n.delete(o)),u&&(o.ontouchstart=null,o.ontouchmove=null,a&&s.length===0&&(document.removeEventListener("touchmove",f,v?{passive:!1}:void 0),a=!1)),s.length===0&&(u?S():m())};export{P as d,x as e};
